%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Copyright (c) 2015 Rodrigo A. Melo <rmelo@inti.gob.ar>
% Copyright (c) 2015 Bruno Valinoti  <valinoti@inti.gob.ar>
% Copyright (c) 2015 Leandro Tozzi   <ltozzi@inti.gob.ar>
% Copyright (c) 2015 Instituto Nacional de Tecnología Industrial
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[conference]{../../resources/IEEEtran/IEEEtran}
\usepackage[utf8]{inputenc}   % El texto de entrada es utf8
\usepackage[T1]{fontenc}      % Codificación de las fonts
%\usepackage[spanish]{babel}   % Selección de español
%\selectlanguage{spanish}
\usepackage{graphicx,subfigure,listings}
\usepackage{tikz,tikz-timing}
\usepackage{flushend}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{Analog Front End Design of Contactless Smart Card for Standard ISO14443A}

\author{
  \IEEEauthorblockN{Flavio Galimberti, Agust\'in Grosso, Yao-Ming Kuo, Juan T\'antera}
  \IEEEauthorblockA{Universidad Tecnol\'ogica Nacional\\
  Facultad Regional Buenos Aires\\
  Email: \{ykuo, agrosso\}@frba.utn.edu.ar, \{fgalimberti, juantantera\}@est.frba.utn.edu.ar}
  %\thanks{}
%  \IEEEauthorblockN{Blinded}
%  \IEEEauthorblockA{Blinded}
}

%Para que aparezca thanks
%\IEEEoverridecommandlockouts

%Aquí se corrige mala separación en silabas
%\hyphenation{e-jem-plo}

\begin{document}

%\ninept % Si queremos letra más chica (para que entre más texto).

\input{../shared.tex}

\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{abstract}
This paper describes a set of analog front end design for contactless smart cards which complies with ISO 14443-2 Type A. It has been implemented in two different technologies: Globalfoundries 130nm (GF130) and On Semiconductor 500nm (ONC5). The design and implementation of both integrated circuits (IC) were manufactured by MOSIS through the Educational Program. The analog front end operates at 13.56MHz with data rate 106kbps. This paper will show the simulation using Synopsys HSPICE and the corresponding test for the CMOS process GF130.

\end{abstract}

%\begin{IEEEkeywords}
%\end{IEEEkeywords}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}
\label{sec:intro}

In recent years Radio Frequency Identification systems (RFID) have become very popular in many service industries, purchasing and distribution logistics, industry, manufacturing companies and material flow systems. In contrast with earlier techniques like barcodes, RFID is more favored because of its longer operation distance, higher precision, faster processing speed and storage capabilities. With it we can identify objects and store some data in a single silicon chip. This technique has been developed dramatically. This paper demonstrates the RF circuits design proposal of contactless IC card which comply with ISO/IEC14443-2 and validates the topologies with measurements. This design satisfies the performance request with the neat circuits, and has been implemented with 0.13um and 0.5um CMOS technology successfully.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{ISO/IEC14443-2}
\label{sec:iso}

\subsection{Types of RF interface}
In ISO/IEC 14443-2 describes two types of RF interface about contactless IC cards which operate at 13.56 MHz: Type A and Type B. 

In Type A, the signal from PCD (Proximity Coupling Device) to PICC (Proximity Integrated Circuit Device) is modulated in ASK (Amplitude Shift Keying) with modulation index 100\%. When receiving the data from PCD, the PICC can’t process the data because the absence of the clock source. 

In Type B,  the signal from PCD to PICC is defined to be modulated with BPSK by carrier, and the signal from PCD to PICC is modulated in ASK with modulation index 10\%, which make it possible for PICC to work continuously. Therefore, the solution given by Type B could reach higher data rate, but the design of the circuits would be more complicated.

This paper describes the circuit design for the Type A. 


\subsection{Analog Front End Modules}

The contactless IC card contains two main sections: RF section and Data Processing Unit (DPU). The modules in RF section are demonstrated in Fig.\ref{fig:modules}, which comprises Power Supply Generator (PSG), Clock Generator (CG), Voltage Regulator (VR), Power On Reset (POR), Modulator  and Demodulator. 

\begin{figure}[]
  \centering
  \includegraphics[page=9,width=80mm]{images-crop.pdf}
  \caption{Contactless IC card modules}
  \label{fig:modules}
\end{figure}

When the PICC enters to the RF field, the signal coupled by antenna can generate power supply through PSG. The PSG consists of a rectifier and a Shunt Regulator. The VG regulates the power of PSG and gives a constant voltage to the rest of the modules. As soon as the power supply reaches the operating condition, the POR gives a low level signal to reset all the Flip-Flops of the DPU. The modulator and demodulator are modules that let the PCD communicate with PICC.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{IC Circuit Design}
\label{sec:design}

The previous section demonstrates the RF modules that involve  the communication between PCD and PICC. This section will describe in detail each module of the Analog Front End for ISO/IEC 14443A (see Fig. \ref{fig:afe}).

\begin{figure}[]
  \centering
  \includegraphics[page=10,width=80mm]{images-crop.pdf}
  \caption{PICC Analog Front End}
  \label{fig:afe}
\end{figure}

\subsection{Power Supply Generator (PSG)}

The Power Supply Generator splits into two parts: signal rectification and power limitation.

The first part rectifies the RF field signal to get power supply for the chip. And the second part consists a Shunt resistor. The Shunt resistor is capable to limit the voltage of the antenna and protects the whole chip. ISO/IEC14443-2 requires the PICC to work when magnetic intensity between 1.5-7.5A/m rms. Therefore the PICC must work in these extreme conditions.  

The simplified schematic of signal rectification is shown in Fig. \ref{fig:rect} and power limitation (Shunt resistor) is shown in Fig. \ref{fig:shunt}.

\begin{figure}[h]
  \centering
  \includegraphics[page=11,width=60mm]{images-crop.pdf}
  \caption{Full Wave Rectifier}
  \label{fig:rect}
\end{figure}

\begin{figure}[h]
  \centering
  \includegraphics[page=12,width=60mm]{images-crop.pdf}
  \caption{Shunt Resistor}
  \label{fig:shunt}
\end{figure}

\subsection{Clock Generator (CG)}

The Clock Generator recovers the clock from the antenna and is used by the DPU. This module generates a clock source of 13.56 MHz. Basically consists of two FF/D and a XOR logic gate. 

The difference of phase between RF+ and RF- are 180 degrees, it is easy to take advantage of this property to recompose the clock. The simplified schematic is shown in Fig. \ref{fig:clk} and the simulation in the Fig. \ref{fig:clk_sim}.

\begin{figure}[]
  \centering
  \includegraphics[page=13,width=60mm]{images-crop.pdf}
  \caption{Clock Generator schematic}
  \label{fig:clk}
\end{figure}

\begin{figure}[]
  \centering
  \includegraphics[page=14,width=80mm]{images-crop.pdf}
  \caption{Clock recovery simulation}
  \label{fig:clk_sim}
\end{figure}

\subsection{Voltage Regulator (VR)}

The Voltage Regulator is a Low Dropout (LDO) Regulator. The topology is shown in Fig. X. Basically it consist of a reference source, in this case, a beta multiplier is used for this purpose. The OP AMP play the role of controller, it copies the reference voltage, control the variation of VRECT or VDD and reflects the reference voltage to the output.

\begin{figure}[]
  \centering
  \includegraphics[page=15,width=60mm]{images-crop.pdf}
  \caption{Voltage Regulator schematic}
  \label{fig:ldo}
\end{figure}

\subsection{Modulator}

The modulator transmits the signal from PICC to PCD. There are two different types of load modulation: resistive and capacitive modulation. Both types create a subcarrier next to 13.56MHz. Resistive modulation was adopted in this design for its simplicity. The schematic is shown in Fig. \ref{fig:mod}.

\begin{figure}[h]
  \centering
  \includegraphics[page=16,width=40mm]{images-crop.pdf}
  \caption{Modulator schematic}
  \label{fig:mod}
\end{figure}

\subsection{Demodulator}

The demodulator recovers the digital signals from the ASK signal transmitted from PCD. An Envelope Extractor (EE) is needed to extract the data. The digital signal is recovered by connecting the output of the EE with the input of the buffer.  The circuit is shown in Fig. \ref{fig:demod}. 

\begin{figure}[h]
  \centering
  \includegraphics[page=17,width=80mm]{images-crop.pdf}
  \caption{Demdulator schematic}
  \label{fig:demod}
\end{figure}

\subsection{Power On Reset (POR)}

The Power On Reset module is used to reset the digital machine and put it into idle state. It consists of a RC low pass network. The schematic is demonstrated in Fig. \ref{fig:por}. 

\begin{figure}[h]
  \centering
  \includegraphics[page=18,width=20mm]{images-crop.pdf}
  \caption{POR schematic}
  \label{fig:por}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Measurement \& Validation}
\label{sec:valid}

The corresponding layout \cite{dali_man} is shown in Fig. \ref{fig:layout}, it was designed for two different CMOS processes: Global Foundries 130nm and On Semiconductor 500nm, but the topologies are similar. The analog Front End covers 0.3mm x 0.2mm in 130nm (Fig. \ref{fig:layout}.a) and 0.6mm x 0.5mm in 500nm (Fig. \ref{fig:layout}.b).

The design of GF130 was shipped by MOSIS, it is shown in Fig. \ref{fig:layout}.c. 

\begin{figure}[h]
  \centering
  \includegraphics[page=19,width=80mm]{images-crop.pdf}
  \caption{(a) ONC5 Layout, (b) GF130 Layout, (c) GF130 Chip}
  \label{fig:layout}
\end{figure}


\begin{figure}[h]
  \centering
  \includegraphics[page=20,width=80mm]{images-crop.pdf}
  \caption{(a) Clk/4 vs RF+, (b) RF+ vs Power On Reset, (c) Clk/4 vs Demodulator output}
  \label{fig:meas}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Acknowledgements}

The authors would like to thank to Nanolab - UTN FRBA for their contributions and support and to the Centro de Micro y Nano Electronica del Bicentenario (CMNB-INTI) for the use of the testing facilities. 
We also thank MOSIS and Synopsys academic programs.
The integrated circuit was designed using Synopsys tools under the Synopsys University Program. The chips were fabricated through the MOSIS foundry service supported by the MOSIS Educational Program (MEP).
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%





%\IEEEtriggeratref{11}
%\footnotesize

\bibliographystyle{../../resources/IEEEtranBST2/IEEEtran}
\bibliography{../../resources/IEEEtranBST2/IEEEabrv,../shared,nfc}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{document}
